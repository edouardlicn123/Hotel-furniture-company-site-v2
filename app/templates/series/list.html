{% extends "base.html" %}

{% block hero_section %}
    {% set hero_title = "Series & Collections" %}
    {% set hero_subtitle = "Explore our curated hotel furniture series designed for luxury hospitality spaces." %}
    {% include 'partials/hero_small.html' %}
{% endblock %}

{% block content %}
<div class="container products-section py-5 py-lg-6">
    <!-- 系列网格 - 与产品列表风格完全一致 -->
    <div class="product-grid">
        {% if series_list %}
            {% for series in series_list %}
            <a href="{{ url_for('series.detail', slug=series.slug) }}"
               class="text-decoration-none series-card-link"
               aria-label="View {{ series.name }} collection details">
                <div class="product-card d-flex flex-column h-100">
                    <!-- 封面图：使用第一张照片 -->
                    <div class="product-card-img-wrapper">
                        {% set photo_list = series.photos.split(',') if series.photos else [] %}
                        {% set first_photo = photo_list[0].strip() if photo_list else None %}

                        {% if first_photo %}
                        <img src="{{ get_image_url('series', first_photo) }}"
                             class="product-card-img-complete"
                             alt="{{ series.name }} - Featured Collection Image"
                             loading="lazy"
                             onerror="this.src='{{ url_for('static', filename='img/placeholder.jpg') }}'; this.onerror=null;">
                        {% else %}
                        <img src="{{ url_for('static', filename='img/placeholder.jpg') }}"
                             class="product-card-img-complete"
                             alt="No image available for {{ series.name }}"
                             loading="lazy">
                        {% endif %}
                    </div>

                    <!-- 文字区域 -->
                    <div class="product-card-body mt-auto p-3">
                        <h3 class="product-card-title mb-2">{{ series.name }}</h3>
                        <p class="product-card-brand text-muted mb-0">
                            {% if series.applicable_space %}
                                {{ series.applicable_space.replace(',', ', ') }}
                            {% else %}
                                Luxury Hotel Collection
                            {% endif %}
                        </p>
                    </div>
                </div>
            </a>
            {% endfor %}
        {% else %}
            <div class="col-12 text-center py-5 my-5">
                <i class="bi bi-collection display-1 text-muted mb-3 d-block"></i>
                <h4 class="text-muted mb-3">No Collections Available Yet</h4>
                <p class="text-muted">
                    Please add new series/collections in the admin panel.<br>
                    <small>Once added, they will appear here automatically.</small>
                </p>
            </div>
        {% endif %}
    </div>

    <!-- 分页导航（与产品列表风格一致） -->
    {% if pagination and (pagination.has_prev or pagination.has_next) %}
    <nav aria-label="Series pagination" class="mt-5">
        <ul class="pagination justify-content-center">
            {% if pagination.has_prev %}
            <li class="page-item">
                <a class="page-link" href="?page={{ pagination.prev_num }}" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            {% endif %}

            <li class="page-item disabled">
                <span class="page-link">Page {{ pagination.page }} of {{ pagination.pages }}</span>
            </li>

            {% if pagination.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ pagination.next_num }}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}
</div>

<!-- 可选：轻量 hover 增强（不改变原有外观结构） -->
<style>
    .series-card-link:hover .product-card {
        transform: translateY(-8px);
        transition: all 0.3s ease;
        box-shadow: 0 12px 24px rgba(0,0,0,0.12);
    }
</style>
{% endblock %}
